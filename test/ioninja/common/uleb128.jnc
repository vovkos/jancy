//! \addtogroup common-enc
//! @{

//..............................................................................

struct DecodeUlebResult {
	char thin const* m_p;
	uint64_t m_value;
}

DecodeUlebResult
decodeUleb(
	char thin const* p,
	char thin const* end
) {
	uint64_t value = 0;
	uint_t shift = 0;

	while (p < end) {
		uint8_t byte = *p++;
		value |= (uint64_t)(byte & 0x7f) << shift;
		if (!(byte & 0x80))
			break;

		shift += 7;
	}

	DecodeUlebResult result = { p, value };
	return result;
}

//..............................................................................

//! @}
